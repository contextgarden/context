% language=us runpath=texruns:manuals/luametatex signal=squid

\enableexperiments[fonts.checkchardisc]
% \disableexperiments[fonts.checkchardisc]

% signal=squid
% signal=quadrant
% signal=segment

% https://u.mtxrun.eu/ctxmtg chat

% \enabletrackers[callbacks.calls]

% \pushoverloadmode

% \nologbuffering

% \enabletrackers[attributes.tracking]

% \usemodule[system-attributes]

% mkxl run stats  > tex properties: 938218 hash slots used of 2097152, 57142 control sequences, approximate memory usage: 127 MB
% mkxl run stats  > tex properties: 495850 hash slots used of 2097152, 57142 control sequences, approximate memory usage: 127 MB

% \unprotect

% noattributes as box

% \def\syst_v_p_indeed#1%
%   {\begingroup
%    \c_attr_visual\attributeunsetvalue
%    \global\setbox\visualizerbox\hpack{\visualizerfont#1}%
%    \endgroup}

% \protect

\enableexperiments[optimize.typesetting.char]
\enableexperiments[optimize.spacing.profile]
\enableexperiments[optimize.math.process]
\enableexperiments[optimize.math.indexed]
\enableexperiments[optimize.backend.traverse]

% watch out : profiling on different path

% \profilemacro\dimexpr
% \profilemacro\numexpr

% \linebuffering

% \nopdfcompression

% \enabletrackers[resolvers.virtual]
% \enabletrackers[resolvers.*]

\environment luametatex-style

% \setuptagging[state=start]
% \enabledirectives[system.feedback]
% \enabletrackers[structures.tags.levels]

\setupalign
  [depth]

\setuplayout
  [vz=2]

\setuptyping
  [align=hangright,
   keeptogether=yes,
%    keeptogether=paragraph,
   numbering=]

% \showframe

\startdocument[title=luametatex,alternative=manual]

\startfrontmatter
    \component luametatex-contents
    \component luametatex-introduction
\stopfrontmatter

\startbodymatter
    \component luametatex-engines
    \component luametatex-principles
    \component luametatex-constructions
    \component luametatex-assumptions
    \component luametatex-internals
    \component luametatex-primitives
  % \writestatus{FOOCHECK}{\meaningfull\foo}
    \component luametatex-callbacks
    \component luametatex-fonts
    \component luametatex-languages
    \component luametatex-lua
    \component luametatex-metapost
    \component luametatex-tex
    \component luametatex-math
    \component luametatex-pdf
    \component luametatex-nodes
    \component luametatex-tokens
    \component luametatex-libraries
    \component luametatex-security
\stopbodymatter

\stopdocument

